CXX = g++
CXXFLAGS = -std=c++17 -O2 -Wall

SRC_DIR = src
STANDARD_DIR = standard
PARALLEL_DIR = parallel

STANDARD_SRCS = $(SRC_DIR)/$(STANDARD_DIR)/main.cpp
STANDARD_HEADERS = $(SRC_DIR)/$(STANDARD_DIR)/state.h $(SRC_DIR)/$(STANDARD_DIR)/sim_anneal.h
STANDARD_TARGET = sim_anneal

PARALLEL_SRCS = $(SRC_DIR)/$(PARALLEL_DIR)/main.cpp
PARALLEL_HEADERS = $(SRC_DIR)/$(PARALLEL_DIR)/state.h $(SRC_DIR)/$(PARALLEL_DIR)/sim_anneal.h
PARALLEL_TARGET = sim_anneal_parallel

all: $(STANDARD_TARGET) $(PARALLEL_TARGET)

$(STANDARD_TARGET): $(STANDARD_SRCS) $(STANDARD_HEADERS)
	$(CXX) $(CXXFLAGS) $(STANDARD_SRCS) -o $(STANDARD_TARGET)

$(PARALLEL_TARGET): $(PARALLEL_SRCS) $(PARALLEL_HEADERS)
	$(CXX) $(CXXFLAGS) -fopenmp $(PARALLEL_SRCS) -o $(PARALLEL_TARGET)

clean:
	rm -f $(STANDARD_TARGET) $(PARALLEL_TARGET)